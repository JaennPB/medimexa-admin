(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[429],{1499:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/usuarios/editar/[id]",function(){return a(6455)}])},8953:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.a3fc0e5d.png",height:140,width:858,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAYAAADjAO9DAAAAKklEQVR4nAVAsQ0AIAiDOHiTFzl5hFcrobTE9z1LIBWYSr6KcgOHZYkf1oIyF0trNUROAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:1}},3111:function(e,t,a){"use strict";var s=a(5893);a(7294),t.Z=function(e){let{children:t}=e;return(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("div",{style:{minHeight:"100v"},className:"card bg-base-100 shadow-xl h-full ",children:(0,s.jsx)("div",{className:"card-body p-4",children:t})})})}},6395:function(e,t,a){"use strict";var s=a(5893);a(7294);var r=a(1664),n=a.n(r);t.Z=function(e){let{children:t}=e;return(0,s.jsxs)("div",{className:"drawer",children:[(0,s.jsx)("input",{id:"my-drawer",type:"checkbox",className:"drawer-toggle"}),(0,s.jsx)("div",{className:"drawer-content",children:t}),(0,s.jsxs)("div",{className:"drawer-side",children:[(0,s.jsx)("label",{htmlFor:"my-drawer",className:"drawer-overlay"}),(0,s.jsxs)("ul",{className:"menu menu-normal p-4 w-96 bg-base-200 text-base-content",children:[(0,s.jsx)("li",{className:"menu-title mt-5 mb-10",children:(0,s.jsx)("span",{children:"Men\xfa Administrador"})}),(0,s.jsx)("li",{children:(0,s.jsx)(n(),{href:"/usuarios",children:"Usuarios"})}),(0,s.jsx)("div",{className:"divider mt-1 mb-1"}),(0,s.jsx)("li",{children:(0,s.jsx)(n(),{href:"/simuladores",children:"Simuladores ENARM"})}),(0,s.jsx)("div",{className:"divider mt-1 mb-1"}),(0,s.jsx)("li",{children:(0,s.jsx)(n(),{href:"/mexaquiz",children:"Mexaquiz"})}),(0,s.jsx)("div",{className:"divider mt-1 mb-1"}),(0,s.jsx)("li",{children:(0,s.jsx)(n(),{href:"/categorias",children:"Categorias"})}),(0,s.jsx)("div",{className:"divider mt-1 mb-1"}),(0,s.jsx)("li",{children:(0,s.jsx)(n(),{href:"/flashcards",children:"Flashcards"})})]})]})]})}},9111:function(e,t,a){"use strict";a.d(t,{Z:function(){return h}});var s=a(5893),r=a(5675),n=a.n(r);a(7294);var i=a(8953),l={src:"/_next/static/media/avatar.82b5caa2.jpeg",height:400,width:400,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABAEBAQAAAAAAAAAAAAAAAAAAAgP/2gAMAwEAAhADEAAAAJQLf//EAB8QAAEDAwUAAAAAAAAAAAAAAAECAxIABAYTFCJCUf/aAAgBAQABPwA5C6u+0HAvblJ5T87Rr//EABcRAAMBAAAAAAAAAAAAAAAAAAACEmL/2gAIAQIBAT8AvKn/xAAXEQEAAwAAAAAAAAAAAAAAAAABAAJi/9oACAEDAQE/AGumf//Z",blurWidth:8,blurHeight:8},d=a(9332),o=a(9551),u=a(7717),c=a(8674),h=function(e){let{isBuilder:t,noLeftItem:a}=e,r=(0,d.useRouter)(),h=(0,u.T)(),m=()=>{o.Z.signOut(),h((0,c.w7)()),r.push("/login")};return(0,s.jsxs)("div",{className:"navbar bg-base-100 h-[7vh]",children:[(0,s.jsxs)("div",{className:"navbar-start",children:[!t&&(0,s.jsx)("label",{tabIndex:0,className:"btn btn-ghost btn-circle",htmlFor:"my-drawer",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h7"})})}),t&&!a&&(0,s.jsxs)("div",{className:"flex flex-row items-center gap-3 ml-3",children:[(0,s.jsx)("p",{children:"242"}),(0,s.jsx)("progress",{className:"progress progress-success w-56",value:"242",max:"280"}),(0,s.jsx)("p",{children:"280"})]}),t&&a&&(0,s.jsx)("div",{className:"flex flex-row items-center gap-3 ml-3",children:"Preguntas creadas: 12"})]}),(0,s.jsx)("div",{className:"navbar-center",children:(0,s.jsx)(n(),{src:i.Z,alt:"logo",className:"w-44"})}),(0,s.jsxs)("div",{className:"navbar-end",children:[!t&&(0,s.jsxs)("div",{className:"dropdown dropdown-end",children:[(0,s.jsx)("label",{tabIndex:0,className:"btn btn-ghost btn-circle avatar",children:(0,s.jsx)("div",{className:"w-10 rounded-full",children:(0,s.jsx)(n(),{src:l,alt:"avatar",className:"w-32"})})}),(0,s.jsxs)("ul",{tabIndex:0,className:"menu menu-compact dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{children:"Ajustes"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{onClick:m,children:"Cerrar sesi\xf3n"})})]})]}),t&&(0,s.jsx)("label",{className:"btn btn-warning mr-3",htmlFor:"my-modal-4",children:"Guardar y salir"})]})]})}},1363:function(e,t,a){"use strict";var s=a(5893),r=a(7294),n=a(2920);let i=e=>{let{fields:t,onClick:a,confirm:i=!0,labels:l=!0,validations:d=!1}=e,o=(0,r.useRef)({});(()=>{let e=o.current;for(let a in t)e[t[a].name]=t[a].defaultValue||"";o.current=e})();let[u,c]=(0,r.useState)(o.current),[h,m]=(0,r.useState)(t),[p,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{c(o.current),m(t)},[t,o]);let f=e=>{c({...u,[e.target.name]:e.target.value})},x=(e,t)=>{if(e.required){let a=typeof u[e.name];"string"==a||"number"==a?""===u[e.name].toString().trim()?(e.noValid=!0,t=!0,e.noValidMessage="Es requerido"):e.noValid=!1:Object.keys(u[e.name]).length?e.noValid=!1:(t=!0,e.noValid=!0)}return{field:e,invalid:t}},g=(e,t)=>{if(d){let t=d[e.name]||!1;t&&!t.fn(u[e.name])&&(e.noValid=!0,e.noValidMessage=t.message)}return{field:e,invalid:t}},b=()=>{let e=!1,t=h.map(t=>{let a=x(t,e);return t=a.field,e=a.invalid,t=(a=g(t,e)).field,e=a.invalid,t});if(e)n.Am.error("Tienes algunos errores"),m(t);else{let e={};for(let t in u)""!==u[t]&&(e[t]=u[t]);A(!0),a(e,A)}},w=e=>e.readonly?" (No se puede editar)":e.required?"":" (opcional)",v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e||t},j=(e,t,a)=>{let s=u[t.name]||{};""!=a.target.value.trim()&&(s[e]=a.target.value,c({...u,[t.name]:s}))},y=(e,t)=>{let a="";return e.defaultValue&&(a=e.defaultValue[t]||""),a};return(0,s.jsxs)(s.Fragment,{children:[h.map(e=>{let{name:t}=e,a=!1;e.readonly&&(a=!0);let r=e.type||"text";if(e.date&&(r="date"),e.number&&(r="number"),e.password&&(r="password"),null==u[e.name])return null;let n=(0,s.jsx)("input",{type:r,readOnly:a,min:v(e.min),placeholder:v(e.placeholder)+w(e),name:e.name,defaultValue:e.defaultValue||"",value:u[t],onChange:f,className:"input input-bordered input-primary w-full mb-6 "+e.className},"input"+e.name);return e.options&&(n=(0,s.jsxs)("select",{placeholder:v(e.placeholder)+w(e),name:e.name,defaultValue:e.defaultValue||"",value:u[t],onChange:f,className:"input input-bordered input-primary w-full mb-6 "+e.className,children:[(0,s.jsxs)("option",{children:[e.placeholder," (Elige una opcion)"]}),e.options]},"input"+e.name)),e.textarea&&(n=(0,s.jsx)("textarea",{rows:6,readOnly:a,placeholder:v(e.placeholder)+w(e),name:e.name,defaultValue:e.defaultValue||"",value:u[t],onChange:f,className:"input input-bordered input-primary w-full mb-6 "+e.className},"input"+e.name)),e.answers&&(n=(0,s.jsxs)("div",{className:"border-dashed border-2 border-gray-500 p-5",children:[(0,s.jsx)("input",{style:{marginBottom:12},defaultValue:y(e,"a"),type:"input",placeholder:"Opcion A",onChange:t=>j("a",e,t),className:"input input-bordered input-primary w-full  mb-6 "+e.className},"input-opcion-1-"+e.name),(0,s.jsx)("input",{style:{marginBottom:12},defaultValue:y(e,"b"),type:"input",placeholder:"Opcion B",onChange:t=>j("b",e,t),className:"input input-bordered input-primary w-full  mb-6 "+e.className},"input-opcion-1-"+e.name),(0,s.jsx)("input",{style:{marginBottom:12},defaultValue:y(e,"c"),type:"input",placeholder:"Opcion C",onChange:t=>j("c",e,t),className:"input input-bordered input-primary w-full  mb-6 "+e.className},"input-opcion-1-"+e.name),(0,s.jsx)("input",{style:{marginBottom:12},defaultValue:y(e,"d"),type:"input",placeholder:"Opcion D",onChange:t=>j("d",e,t),className:"input input-bordered input-primary w-full  mb-6 "+e.className},"input-opcion-1-"+e.name),(0,s.jsx)("input",{style:{marginBottom:12},defaultValue:y(e,"e"),type:"input",placeholder:"Opcion E",onChange:t=>j("e",e,t),className:"input input-bordered input-primary w-full  mb-6 "+e.className},"input-opcion-1-"+e.name),(0,s.jsx)("input",{style:{marginBottom:12},defaultValue:y(e,"f"),type:"input",placeholder:"Opcion F",onChange:t=>j("f",e,t),className:"input input-bordered input-primary w-full  mb-6 "+e.className},"input-opcion-1-"+e.name)]})),(0,s.jsxs)(s.Fragment,{children:[l&&(0,s.jsx)("span",{children:e.placeholder}),n,e.noValid&&(0,s.jsx)("small",{style:{color:"red"},children:e.noValidMessage},"small"+e.name)]})}),(0,s.jsx)("button",{className:"btn btn-primary btn-block",onClick:b,children:p?"Cargando...":"Guardar"})]})};t.Z=i},2031:function(e,t,a){"use strict";a.d(t,{O:function(){return l}});var s=a(723),r=a(8010);class n extends s.Z{constructor(e){super("roles",e)}}class i extends r.Z{constructor(){super("roles",n)}}let l=new i;t.Z=n},2993:function(e,t,a){"use strict";a.d(t,{Z:function(){return y},v:function(){return j}});var s=a(723),r=a(8010),n=a(2031),i=a(9551),l=a(6983),d=a(6650),o=a(6104),u=a.n(o);let c=new class{ref(e){return(0,d.iH)(l.tO,e)}upload(e){let t=e.name.split(".").pop(),a=u()(),s=this.ref("".concat(a,".").concat(t));return(0,d.KV)(s,e)}getFile(e){let t=this.ref(e);return(0,d.Jt)(t)}delete(e){let t=this.ref(e);return(0,d.oq)(t)}};class h extends s.Z{getUrl(){return c.getFile(this.data.url)}constructor(e){super("medias",e,{_delete:async()=>await c.delete(this.data.url)})}}class m extends r.Z{constructor(){super("medias",h)}}let p=new m;var A=a(6100);class f extends s.Z{constructor(e){super("type_medias",e)}}class x extends r.Z{constructor(){super("type_medias",f)}}let g=new x;var b=class{all(){return p.where("model_id","==",this.model_id)}constructor(e){this.findType=async e=>await g.where("name","==",e),this.type=async e=>{let t=await this.findType(e);return p.whereRaw([(0,A.ar)("model_id","==",this.model_id),(0,A.ar)("type_media_id","==",t.data.id)])},this.save=async(e,t)=>{let a=(await this.findType(e))[0];return c.upload(t).then(async e=>{let s=e.metadata.fullPath,r=new h({type_media_id:a.data.id,model_id:this.model_id,name:t.name,url:s});return await r.save()})},this.model_id=e}};class w extends s.Z{unset(e){void 0!=this.data[e]&&delete this.data[e]}role(){return n.O.find(this.data.role_id)}constructor(e){super("users",e,{_save:async()=>{let e=this.data.password;return this.unset("password"),i.Z.register(this.data.email,e)},_update:async()=>{this.old.email,this.data.email,this.unset("password")},_delete:async()=>{this.data.email+="_"+Date.now()}}),this.media=new b(this.data.id)}}class v extends r.Z{constructor(){super("users",w)}}let j=new v;var y=w},723:function(e,t,a){"use strict";var s=a(6100),r=a(6983);t.Z=class{constructor(e,t,a={}){this.save=async()=>{if(void 0!=this._save)try{await this._save()}catch(e){}return(0,s.ET)((0,s.hJ)(r.ZP,this.table),{...this.data,created_at:Date.now(),updated_at:Date.now(),deleted_at:null}).then(e=>{this.old=e,this.data.id=e.id})},this.update=async()=>{if(void 0!=this._update)try{await this._update()}catch(e){}return(0,s.r7)((0,s.JU)(r.ZP,this.table,this.data.id),{...this.data,updated_at:Date.now()})},this.delete=async()=>{if(void 0!=this._delete)try{await this._delete()}catch(e){}this.data.deleted_at=Date.now(),this.update()},this.table=e,this.data=t,this.old=t,a._save&&(this._save=a._save),a._update&&(this._update=a._update),a._delete&&(this._delete=a._delete)}}},8010:function(e,t,a){"use strict";var s=a(6100),r=a(6983);(0,s.IO)((0,s.hJ)(r.ZP,"cities"),(0,s.ar)("capital","==",!0)),t.Z=class{constructor(e,t){var a=this;this.find=e=>(0,s.QT)((0,s.JU)(r.ZP,this.table,e)).then(e=>{let t=e.data();if(t&&null==(t={id:e.id,...e.data()}).deleted_at)return new this.model(t);throw"No se encontro el usuario"}),this.all=()=>(0,s.PL)((0,s.hJ)(r.ZP,this.table)).then(e=>e.docs.filter(this.filterDoc).map(this.mapDoc)),this.where=(e,t,a)=>{let n=(0,s.hJ)(r.ZP,this.table),i=(0,s.IO)(n,(0,s.ar)(e,t,a));return(0,s.PL)(i).then(e=>e.docs.filter(this.filterDoc).map(this.mapDoc))},this.whereRaw=e=>{let t=(0,s.hJ)(r.ZP,this.table),a=(0,s.IO)(t,...e);return(0,s.PL)(a).then(e=>e.docs.filter(this.filterDoc).map(this.mapDoc))},this.subscribe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t||(t=()=>{}),(0,s.cf)((0,s.hJ)(r.ZP,a.table),t=>{e(t.docs.filter(a.filterDoc).map(a.mapDoc))},e=>{t(Error),console.log(e)})},this.filterDoc=e=>null==e.data().deleted_at,this.mapDoc=e=>new this.model({...e.data(),id:e.id}),this.toArray=e=>e.map(e=>e.data),this.first=e=>e[0]||!1,this.table=e,this.model=t}}},6455:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return A}});var s=a(5893),r=a(8320),n=a.n(r),i=a(7294),l=a(3111),d=a(6395),o=a(9111),u=a(2993),c=a(2031),h=a(1363),m=a(2920),p=a(1163);function A(){let e=(0,p.useRouter)(),t=e.query.id,[a,r]=(0,i.useState)([]),[A,f]=(0,i.useState)([]),[x,g]=(0,i.useState)({});(0,i.useEffect)(()=>{c.O.all().then(c.O.toArray).then(f)},[]),(0,i.useEffect)(()=>{t&&u.v.find(t).then(g)},[t]),(0,i.useEffect)(()=>{var e,t,a;r([{name:"name",placeholder:"nombre",required:!0,defaultValue:null===(e=x.data)||void 0===e?void 0:e.name},{name:"lastname",placeholder:"apellido",required:!0,defaultValue:null===(t=x.data)||void 0===t?void 0:t.lastname},{name:"role_id",placeholder:"rol",required:!0,options:A.map((e,t)=>{var a;return(0,s.jsx)("option",{selected:(null===(a=x.data)||void 0===a?void 0:a.role_id)===e.id,value:e.id,children:e.name},t)}),defaultValue:null===(a=x.data)||void 0===a?void 0:a.role_id}])},[A,x]);let b=(t,a)=>{x.data.name=t.name,x.data.lastname=t.lastname,x.role_id=t.role_id,x.update().then(()=>{a(!1),m.Am.success("Usuario editado correctamente"),e.push("/usuarios")})};return(0,s.jsx)("main",{className:"bg-base-200 h-screen w-screen ".concat(n().className),children:(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(o.Z,{}),(0,s.jsxs)(l.Z,{children:[(0,s.jsx)("h1",{children:"Editar usuario "}),(0,s.jsx)(h.Z,{fields:a,onClick:b})]})]})})}},8320:function(e){e.exports={style:{fontFamily:"'__Inter_0ec1f4', '__Inter_Fallback_0ec1f4'",fontStyle:"normal"},className:"__className_0ec1f4"}},1163:function(e,t,a){e.exports=a(6885)},6104:function(e,t,a){var s=a(3454),r=void 0!==s&&s.pid?s.pid.toString(36):"";function n(){var e=Date.now(),t=n.last||e;return n.last=e>t?e:t+1}e.exports=e.exports.default=function(e,t){return(e||"")+""+r+n().toString(36)+(t||"")},e.exports.process=function(e,t){return(e||"")+r+n().toString(36)+(t||"")},e.exports.time=function(e,t){return(e||"")+n().toString(36)+(t||"")}}},function(e){e.O(0,[675,664,774,888,179],function(){return e(e.s=1499)}),_N_E=e.O()}]);