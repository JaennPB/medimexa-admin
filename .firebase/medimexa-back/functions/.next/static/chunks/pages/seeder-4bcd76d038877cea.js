(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{9674:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/seeder",function(){return a(1522)}])},1735:function(t,e,a){"use strict";a.d(e,{l:function(){return d}});var s=a(723),i=a(8010);class r extends s.Z{constructor(t){super("quiz_types",t)}}class n extends i.Z{constructor(){super("quiz_types",r)}}let d=new n;e.Z=r},2031:function(t,e,a){"use strict";a.d(e,{O:function(){return d}});var s=a(723),i=a(8010);class r extends s.Z{constructor(t){super("roles",t)}}class n extends i.Z{constructor(){super("roles",r)}}let d=new n;e.Z=r},2993:function(t,e,a){"use strict";a.d(e,{Z:function(){return D},v:function(){return x}});var s=a(723),i=a(8010),r=a(2031),n=a(9551),d=a(6983),o=a(6650),l=a(6104),c=a.n(l);let u=new class{ref(t){return(0,o.iH)(d.tO,t)}upload(t){let e=t.name.split(".").pop(),a=c()(),s=this.ref("".concat(a,".").concat(e));return(0,o.KV)(s,t)}getFile(t){let e=this.ref(t);return(0,o.Jt)(e)}delete(t){let e=this.ref(t);return(0,o.oq)(e)}};class h extends s.Z{getUrl(){return u.getFile(this.data.url)}constructor(t){super("medias",t,{_delete:async()=>await u.delete(this.data.url)})}}class m extends i.Z{constructor(){super("medias",h)}}let p=new m;var _=a(6100);class w extends s.Z{constructor(t){super("type_medias",t)}}class f extends i.Z{constructor(){super("type_medias",w)}}let v=new f;var y=class{all(){return p.where("model_id","==",this.model_id)}constructor(t){this.findType=async t=>await v.where("name","==",t),this.type=async t=>{let e=await this.findType(t);return p.whereRaw([(0,_.ar)("model_id","==",this.model_id),(0,_.ar)("type_media_id","==",e.data.id)])},this.save=async(t,e)=>{let a=(await this.findType(t))[0];return u.upload(e).then(async t=>{let s=t.metadata.fullPath,i=new h({type_media_id:a.data.id,model_id:this.model_id,name:e.name,url:s});return await i.save()})},this.model_id=t}};class Z extends s.Z{unset(t){void 0!=this.data[t]&&delete this.data[t]}role(){return r.O.find(this.data.role_id)}constructor(t){super("users",t,{_save:async()=>{let t=this.data.password;return this.unset("password"),n.Z.register(this.data.email,t)},_update:async()=>{this.old.email,this.data.email,this.unset("password")},_delete:async()=>{this.data.email+="_"+Date.now()}}),this.media=new y(this.data.id)}}class b extends i.Z{constructor(){super("users",Z)}}let x=new b;var D=Z},723:function(t,e,a){"use strict";var s=a(6100),i=a(6983);e.Z=class{constructor(t,e,a={}){this.save=async()=>{if(void 0!=this._save)try{await this._save()}catch(t){}return(0,s.ET)((0,s.hJ)(i.ZP,this.table),{...this.data,created_at:Date.now(),updated_at:Date.now(),deleted_at:null}).then(t=>{this.old=t,this.data.id=t.id})},this.update=async()=>{if(void 0!=this._update)try{await this._update()}catch(t){}return(0,s.r7)((0,s.JU)(i.ZP,this.table,this.data.id),{...this.data,updated_at:Date.now()})},this.delete=async()=>{if(void 0!=this._delete)try{await this._delete()}catch(t){}this.data.deleted_at=Date.now(),this.update()},this.table=t,this.data=e,this.old=e,a._save&&(this._save=a._save),a._update&&(this._update=a._update),a._delete&&(this._delete=a._delete)}}},8010:function(t,e,a){"use strict";var s=a(6100),i=a(6983);(0,s.IO)((0,s.hJ)(i.ZP,"cities"),(0,s.ar)("capital","==",!0)),e.Z=class{constructor(t,e){var a=this;this.find=t=>(0,s.QT)((0,s.JU)(i.ZP,this.table,t)).then(t=>{let e=t.data();if(e&&null==(e={id:t.id,...t.data()}).deleted_at)return new this.model(e);throw"No se encontro el usuario"}),this.all=()=>(0,s.PL)((0,s.hJ)(i.ZP,this.table)).then(t=>t.docs.filter(this.filterDoc).map(this.mapDoc)),this.where=(t,e,a)=>{let r=(0,s.hJ)(i.ZP,this.table),n=(0,s.IO)(r,(0,s.ar)(t,e,a));return(0,s.PL)(n).then(t=>t.docs.filter(this.filterDoc).map(this.mapDoc))},this.whereRaw=t=>{let e=(0,s.hJ)(i.ZP,this.table),a=(0,s.IO)(e,...t);return(0,s.PL)(a).then(t=>t.docs.filter(this.filterDoc).map(this.mapDoc))},this.subscribe=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e||(e=()=>{}),(0,s.cf)((0,s.hJ)(i.ZP,a.table),e=>{t(e.docs.filter(a.filterDoc).map(a.mapDoc))},t=>{e(Error),console.log(t)})},this.filterDoc=t=>null==t.data().deleted_at,this.mapDoc=t=>new this.model({...t.data(),id:t.id}),this.toArray=t=>t.map(t=>t.data),this.first=t=>t[0]||!1,this.table=t,this.model=e}}},1522:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return d}});var s=a(5893),i=a(2031),r=a(2993),n=a(1735);function d(){let t=async()=>{let t=new i.Z({name:"administrador"});await t.save(),t=new i.Z({name:"maestro"}),await t.save(),t=new i.Z({name:"estudiante"}),await t.save(),alert("roles completados")},e=async()=>{let t=new n.Z({name:"enarm"});await t.save(),alert("quiz type completados")},a=()=>{i.O.where("name","==","administrador").then(t=>{let e=t[0],a=new r.Z({name:"usuario",lastname:"administrador",email:"administrador@medimexa.com",password:"root1234",role_id:e.data.id});a.save()}),i.O.where("name","==","estudiante").then(t=>{let e=t[0],a=new r.Z({name:"usuario",lastname:"estudiante",email:"estudiante@medimexa.com",password:"root1234",role_id:e.data.id});a.save()})},d={border:1,borderColor:"black",backgroundColor:"white",margin:10,padding:10};return(0,s.jsxs)("main",{className:"bg-base-200 h-screen flex justify-center items-center ",children:[(0,s.jsx)("button",{style:d,onClick:t,children:"Roles "}),(0,s.jsx)("button",{style:d,onClick:a,children:"Usuarios "}),(0,s.jsx)("button",{style:d,onClick:e,children:"Tipos de quiz "})]})}},6104:function(t,e,a){var s=a(3454),i=void 0!==s&&s.pid?s.pid.toString(36):"";function r(){var t=Date.now(),e=r.last||t;return r.last=t>e?t:e+1}t.exports=t.exports.default=function(t,e){return(t||"")+""+i+r().toString(36)+(e||"")},t.exports.process=function(t,e){return(t||"")+i+r().toString(36)+(e||"")},t.exports.time=function(t,e){return(t||"")+r().toString(36)+(e||"")}}},function(t){t.O(0,[774,888,179],function(){return t(t.s=9674)}),_N_E=t.O()}]);