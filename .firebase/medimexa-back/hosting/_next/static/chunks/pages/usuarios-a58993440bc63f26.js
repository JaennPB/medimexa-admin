(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[361],{1530:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/usuarios",function(){return s(9414)}])},4616:function(e,t,s){"use strict";var a=s(5893);s(7294),t.Z=function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"checkbox",id:"my-modal-2",className:"modal-toggle"}),(0,a.jsx)("div",{className:"modal modal-bottom sm:modal-middle",children:(0,a.jsxs)("div",{className:"modal-box",children:[(0,a.jsx)("h3",{className:"font-bold text-lg",children:"\xbfEst\xe1s seguro?"}),(0,a.jsx)("p",{className:"py-4",children:"Una vez borrado no se podr\xe1 recuperar."}),(0,a.jsxs)("div",{className:"modal-action",children:[(0,a.jsx)("label",{htmlFor:"my-modal-2",className:"btn w-32 btn-ghost",children:"No"}),(0,a.jsx)("label",{htmlFor:"my-modal-2",className:"btn w-32 btn-accent",children:"S\xed"})]})]})})]})}},2031:function(e,t,s){"use strict";s.d(t,{O:function(){return l}});var a=s(723),n=s(8010);class r extends a.Z{constructor(e){super("roles",e)}}class i extends n.Z{constructor(){super("roles",r)}}let l=new i;t.Z=r},2993:function(e,t,s){"use strict";s.d(t,{Z:function(){return Z},v:function(){return j}});var a=s(723),n=s(8010),r=s(2031),i=s(9551),l=s(6983),o=s(6650),c=s(6104),d=s.n(c);let u=new class{ref(e){return(0,o.iH)(l.tO,e)}upload(e){let t=e.name.split(".").pop(),s=d()(),a=this.ref("".concat(s,".").concat(t));return(0,o.KV)(a,e)}getFile(e){let t=this.ref(e);return(0,o.Jt)(t)}delete(e){let t=this.ref(e);return(0,o.oq)(t)}};class m extends a.Z{getUrl(){return u.getFile(this.data.url)}constructor(e){super("medias",e,{_delete:async()=>await u.delete(this.data.url)})}}class h extends n.Z{constructor(){super("medias",m)}}let p=new h;var f=s(6100);class _ extends a.Z{constructor(e){super("type_medias",e)}}class x extends n.Z{constructor(){super("type_medias",_)}}let w=new x;var y=class{all(){return p.where("model_id","==",this.model_id)}constructor(e){this.findType=async e=>await w.where("name","==",e),this.type=async e=>{let t=await this.findType(e);return p.whereRaw([(0,f.ar)("model_id","==",this.model_id),(0,f.ar)("type_media_id","==",t.data.id)])},this.save=async(e,t)=>{let s=(await this.findType(e))[0];return u.upload(t).then(async e=>{let a=e.metadata.fullPath,n=new m({type_media_id:s.data.id,model_id:this.model_id,name:t.name,url:a});return await n.save()})},this.model_id=e}};class v extends a.Z{unset(e){void 0!=this.data[e]&&delete this.data[e]}role(){return r.O.find(this.data.role_id)}constructor(e){super("users",e,{_save:async()=>{let e=this.data.password;return this.unset("password"),i.Z.register(this.data.email,e)},_update:async()=>{this.old.email,this.data.email,this.unset("password")},_delete:async()=>{this.data.email+="_"+Date.now()}}),this.media=new y(this.data.id)}}class N extends n.Z{constructor(){super("users",v)}}let j=new N;var Z=v},9414:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var a=s(5893),n=s(2937),r=s.n(n),i=s(7294),l=s(3111),o=s(6395),c=s(7148),d=s(4616),u=s(792),m=s(9111),h=s(3870),p=s(5013),f=s(2993);function _(){let[e,t]=(0,i.useState)([]);(0,i.useEffect)(()=>{f.v.all().then(f.v.toArray).then(t)},[]);let s=e=>(console.log(u.I),{id:e.id,nombre:e.name+" "+e.lastname,email:e.email,_:(0,a.jsx)("div",{className:"text-center w-80",children:(0,a.jsx)(u.I,{path:"/usuarios/editar/".concat(e.id)})})});return(0,a.jsxs)("main",{className:"bg-base-200 h-screen w-screen ".concat(r().className),children:[(0,a.jsx)(c.Z,{description:"Usuarios",path:"usuarios/nuevo"}),(0,a.jsx)(d.Z,{}),(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(m.Z,{}),(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(h.Z,{title:"Usuarios",description:"Nuevo usuario"}),(0,a.jsx)(p.Z,{description:"Preg\xfantas",data:e,columns:s})]})]})]})}},2937:function(e){e.exports={style:{fontFamily:"'__Inter_0ec1f4', '__Inter_Fallback_0ec1f4'",fontStyle:"normal"},className:"__className_0ec1f4"}},6104:function(e,t,s){var a=s(3454),n=void 0!==a&&a.pid?a.pid.toString(36):"";function r(){var e=Date.now(),t=r.last||e;return r.last=e>t?e:t+1}e.exports=e.exports.default=function(e,t){return(e||"")+""+n+r().toString(36)+(t||"")},e.exports.process=function(e,t){return(e||"")+n+r().toString(36)+(t||"")},e.exports.time=function(e,t){return(e||"")+r().toString(36)+(t||"")}}},function(e){e.O(0,[675,664,231,774,888,179],function(){return e(e.s=1530)}),_N_E=e.O()}]);